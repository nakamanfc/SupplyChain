{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\mew-supplychain\\\\front-end\\\\src\\\\Component\\\\PostPage\\\\PostImg.js\";\nimport React, { useState } from 'react';\nimport '../../Style/PostImg.css';\nimport AddPhotoAlternateIcon from '@material-ui/icons/AddPhotoAlternate';\nimport IPFS from 'ipfs-api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ipfs = new IPFS({\n  host: 'ipfs.infura.io',\n  port: 5001,\n  protocol: 'https'\n});\n\nfunction PostImg({\n  image,\n  setImage\n}) {\n  function captureFile(event) {\n    event.preventDefault();\n    const file = event.target.files[0];\n    const reader = new window.FileReader();\n    reader.readAsArrayBuffer(file);\n\n    reader.onloadend = () => {\n      setImage(Buffer(reader.result));\n      console.log('buffer', image);\n      ipfs.files.add(Buffer(reader.result), (error, result) => {\n        if (error) {\n          console.log(error);\n        }\n\n        console.log(res);\n        setImage(result[0].hash);\n      });\n    };\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: image != null ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"image/*\",\n        id: \"input-image\",\n        hidden: true,\n        onChange: captureFile\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"postimg-img-box\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"postimg-img\",\n          src: `https://ipfs.io/ipfs/${image}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"image/*\",\n        id: \"input-image\",\n        hidden: true,\n        onChange: captureFile\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        for: \"input-image\",\n        className: \"postimg-box\",\n        children: /*#__PURE__*/_jsxDEV(AddPhotoAlternateIcon, {\n          style: {\n            fontSize: 200\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)\n  }, void 0, false);\n}\n\n_c = PostImg;\nexport default PostImg;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostImg\");","map":{"version":3,"sources":["C:/Users/user/mew-supplychain/front-end/src/Component/PostPage/PostImg.js"],"names":["React","useState","AddPhotoAlternateIcon","IPFS","ipfs","host","port","protocol","PostImg","image","setImage","captureFile","event","preventDefault","file","target","files","reader","window","FileReader","readAsArrayBuffer","onloadend","Buffer","result","console","log","add","error","res","hash","fontSize"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAO,yBAAP;AACA,OAAOC,qBAAP,MAAkC,sCAAlC;AACA,OAAOC,IAAP,MAAiB,UAAjB;;;AACA,MAAMC,IAAI,GAAG,IAAID,IAAJ,CAAS;AAAEE,EAAAA,IAAI,EAAE,gBAAR;AAA0BC,EAAAA,IAAI,EAAE,IAAhC;AAAsCC,EAAAA,QAAQ,EAAE;AAAhD,CAAT,CAAb;;AAEA,SAASC,OAAT,CAAiB;AAACC,EAAAA,KAAD;AAAOC,EAAAA;AAAP,CAAjB,EAAmC;AAC/B,WAASC,WAAT,CAAqBC,KAArB,EAA4B;AACxBA,IAAAA,KAAK,CAACC,cAAN;AACA,UAAMC,IAAI,GAAGF,KAAK,CAACG,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAb;AACA,UAAMC,MAAM,GAAG,IAAIC,MAAM,CAACC,UAAX,EAAf;AACAF,IAAAA,MAAM,CAACG,iBAAP,CAAyBN,IAAzB;;AACAG,IAAAA,MAAM,CAACI,SAAP,GAAmB,MAAM;AACvBX,MAAAA,QAAQ,CAACY,MAAM,CAACL,MAAM,CAACM,MAAR,CAAP,CAAR;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBhB,KAAtB;AACAL,MAAAA,IAAI,CAACY,KAAL,CAAWU,GAAX,CAAeJ,MAAM,CAACL,MAAM,CAACM,MAAR,CAArB,EAAsC,CAACI,KAAD,EAAQJ,MAAR,KAAmB;AACvD,YAAGI,KAAH,EAAS;AACPH,UAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACD;;AACDH,QAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACAlB,QAAAA,QAAQ,CAACa,MAAM,CAAC,CAAD,CAAN,CAAUM,IAAX,CAAR;AACD,OAND;AAOD,KAVD;AAWD;;AACH,sBACI;AAAA,cACCpB,KAAK,IAAE,IAAP,gBAEG;AAAA,8BACI;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,MAAM,EAAC,SAA1B;AAAoC,QAAA,EAAE,EAAC,aAAvC;AAAqD,QAAA,MAAM,MAA3D;AAA4D,QAAA,QAAQ,EAAEE;AAAtE;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAO,QAAA,SAAS,EAAC,iBAAjB;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,aAAf;AAA6B,UAAA,GAAG,EAAG,wBAAuBF,KAAM;AAAhE;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA,oBAFH,gBASG;AAAA,8BACA;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,MAAM,EAAC,SAA1B;AAAoC,QAAA,EAAE,EAAC,aAAvC;AAAqD,QAAA,MAAM,MAA3D;AAA4D,QAAA,QAAQ,EAAEE;AAAtE;AAAA;AAAA;AAAA;AAAA,cADA,eAEA;AAAO,QAAA,GAAG,EAAC,aAAX;AAAyB,QAAA,SAAS,EAAC,aAAnC;AAAA,+BACI,QAAC,qBAAD;AAAuB,UAAA,KAAK,EAAE;AAACmB,YAAAA,QAAQ,EAAE;AAAX;AAA9B;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAFA;AAAA;AAVJ,mBADJ;AAoBH;;KAtCQtB,O;AAwCT,eAAeA,OAAf","sourcesContent":["import React, { useState } from 'react'\r\nimport '../../Style/PostImg.css'\r\nimport AddPhotoAlternateIcon from '@material-ui/icons/AddPhotoAlternate';\r\nimport IPFS from 'ipfs-api'\r\nconst ipfs = new IPFS({ host: 'ipfs.infura.io', port: 5001, protocol: 'https' });\r\n\r\nfunction PostImg({image,setImage}) {\r\n    function captureFile(event) {\r\n        event.preventDefault()\r\n        const file = event.target.files[0]\r\n        const reader = new window.FileReader()\r\n        reader.readAsArrayBuffer(file)\r\n        reader.onloadend = () => {\r\n          setImage(Buffer(reader.result))\r\n          console.log('buffer', image)\r\n          ipfs.files.add(Buffer(reader.result), (error, result) => {\r\n            if(error){\r\n              console.log(error)\r\n            }\r\n            console.log(res)\r\n            setImage(result[0].hash)\r\n          })\r\n        }\r\n      }\r\n    return (\r\n        <>\r\n        {image!=null?\r\n        (\r\n            <>\r\n                <input type='file' accept='image/*' id=\"input-image\" hidden onChange={captureFile}/>\r\n                <label className='postimg-img-box'>\r\n                    <img className='postimg-img' src={`https://ipfs.io/ipfs/${image}`}/>\r\n                </label>\r\n            </>\r\n        ):(\r\n            <>\r\n            <input type='file' accept='image/*' id=\"input-image\" hidden onChange={captureFile}/>\r\n            <label for=\"input-image\" className='postimg-box'>\r\n                <AddPhotoAlternateIcon style={{fontSize: 200}}/>\r\n            </label>\r\n            </>\r\n        )}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default PostImg\r\n"]},"metadata":{},"sourceType":"module"}