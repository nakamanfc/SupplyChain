{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\mew-supplychain\\\\front-end\\\\src\\\\Component\\\\CompanyPage\\\\CompanyAddStaff.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport '../../Style/CompanyAddStaff.css';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport { IconButton, TextField } from '@material-ui/core';\nimport WebThree from '../../Function/WebThree';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CompanyAddStaff({\n  getStaffList\n}) {\n  _s();\n\n  const [name, setName] = useState(null);\n  const [date, setDate] = useState(null);\n  const [position, setPosition] = useState(null);\n\n  function ChangeName(event) {\n    setName(event.target.value);\n  }\n\n  function ChangeDate(event) {\n    setDate(event.target.value);\n  }\n\n  function ChangePosition(event) {\n    setPosition(event.target.value);\n  }\n\n  async function CreateStaff() {\n    var data = WebThree.createAccount(`${name},${date},${position}`);\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: name,\n        birthday: date,\n        positon: position,\n        company: localStorage.getItem('account'),\n        address: data.address,\n        privatekey: data.privateKey\n      })\n    };\n    await fetch(\"http://localhost:5000/staff\", requestOptions).then(res => res.text()).then(res => {\n      console.log(res);\n    }).then(getStaffList).then(postDataToBlockchain(data.address)).then(getStaffList);\n  }\n\n  function puthData(id, txhash, address) {\n    const requestOptions = {\n      method: 'put',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: id,\n        txhash: txhash,\n        address: address\n      })\n    };\n    fetch(\"http://localhost:5000/staff\", requestOptions);\n    console.log(\"puthData\", id, txhash);\n  }\n\n  async function postDataToBlockchain(address) {\n    WebThree.setAccount(localStorage.getItem('key'));\n    await WebThree.staffContract().methods.CreateStaff(`${address}`).send({\n      from: `${localStorage.getItem('account')}`,\n      gasPrice: 0,\n      gas: 200000\n    }).on('receipt', function (receipt) {\n      puthData(receipt.events.NewEvent.returnValues.ID, receipt.transactionHash, address);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"companyaddstaff-container\",\n    children: [/*#__PURE__*/_jsxDEV(IconButton, {\n      onClick: CreateStaff,\n      children: /*#__PURE__*/_jsxDEV(AddCircleIcon, {\n        style: {\n          fontSize: 30\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      label: \"Full Name\",\n      variant: \"outlined\",\n      onChange: ChangeName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      type: \"date\",\n      variant: \"outlined\",\n      onChange: ChangeDate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      label: \"Position\",\n      variant: \"outlined\",\n      onChange: ChangePosition\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CompanyAddStaff, \"jmS6sveVHg47OdliSEPObIn6bBg=\");\n\n_c = CompanyAddStaff;\nexport default CompanyAddStaff;\n\nvar _c;\n\n$RefreshReg$(_c, \"CompanyAddStaff\");","map":{"version":3,"sources":["C:/Users/user/mew-supplychain/front-end/src/Component/CompanyPage/CompanyAddStaff.js"],"names":["React","useState","AddCircleIcon","IconButton","TextField","WebThree","CompanyAddStaff","getStaffList","name","setName","date","setDate","position","setPosition","ChangeName","event","target","value","ChangeDate","ChangePosition","CreateStaff","data","createAccount","requestOptions","method","headers","body","JSON","stringify","birthday","positon","company","localStorage","getItem","address","privatekey","privateKey","fetch","then","res","text","console","log","postDataToBlockchain","puthData","id","txhash","setAccount","staffContract","methods","send","from","gasPrice","gas","on","receipt","events","NewEvent","returnValues","ID","transactionHash","fontSize"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport '../../Style/CompanyAddStaff.css'\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle'\r\nimport { IconButton, TextField } from '@material-ui/core'\r\nimport WebThree from '../../Function/WebThree'\r\n\r\nfunction CompanyAddStaff({getStaffList}) {\r\n    const [name,setName] = useState(null)\r\n    const [date,setDate] = useState(null)\r\n    const [position,setPosition] = useState(null)\r\n\r\n    function ChangeName(event){\r\n        setName(event.target.value);\r\n    }\r\n    function ChangeDate(event){\r\n        setDate(event.target.value);\r\n    }\r\n    function ChangePosition(event){\r\n        setPosition(event.target.value);\r\n    }\r\n    async function CreateStaff(){\r\n        var data = WebThree.createAccount(`${name},${date},${position}`)\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: {'Content-Type': 'application/json'},\r\n            body: JSON.stringify({name:name, birthday:date, positon:position, company:localStorage.getItem('account'), address:data.address, privatekey:data.privateKey})\r\n        };\r\n        await fetch(\"http://localhost:5000/staff\", requestOptions).then(res => res.text())\r\n        .then(res => {console.log(res)})\r\n        .then(getStaffList)\r\n        .then(postDataToBlockchain(data.address))\r\n                .then(getStaffList)\r\n    }\r\n    function puthData(id,txhash,address){\r\n        const requestOptions = {\r\n            method: 'put',\r\n            headers: {'Content-Type': 'application/json'},\r\n            body: JSON.stringify({id:id,txhash:txhash,address:address})\r\n        };\r\n        fetch(\"http://localhost:5000/staff\", requestOptions)\r\n        console.log(\"puthData\", id, txhash)\r\n    }\r\n\r\n    async function postDataToBlockchain(address){\r\n        WebThree.setAccount(localStorage.getItem('key'))\r\n        await WebThree.staffContract().methods\r\n        .CreateStaff(`${address}`)\r\n        .send({from: `${localStorage.getItem('account')}`, gasPrice:0, gas:200000})\r\n        .on('receipt', function(receipt){puthData(receipt.events.NewEvent.returnValues.ID,receipt.transactionHash,address)})\r\n    }\r\n\r\n    return (\r\n        <div className='companyaddstaff-container'>\r\n            <IconButton onClick={CreateStaff}>\r\n                <AddCircleIcon style={{fontSize: 30}}/>\r\n            </IconButton>\r\n            <TextField label=\"Full Name\" variant=\"outlined\" onChange={ChangeName}/>\r\n            <TextField type='date' variant=\"outlined\" onChange={ChangeDate}/>\r\n            <TextField label=\"Position\" variant=\"outlined\" onChange={ChangePosition}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CompanyAddStaff\r\n"]},"metadata":{},"sourceType":"module"}