{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ensureTopicStats = exports.createTopicStats = exports.createPeerStats = void 0;\n\nfunction createPeerStats(ps = {}) {\n  return Object.assign(Object.assign({\n    connected: false,\n    expire: 0,\n    ips: [],\n    behaviourPenalty: 0\n  }, ps), {\n    topics: ps.topics ? Object.entries(ps.topics).reduce((topics, [topic, topicStats]) => {\n      topics[topic] = createTopicStats(topicStats);\n      return topics;\n    }, {}) : {}\n  });\n}\n\nexports.createPeerStats = createPeerStats;\n\nfunction createTopicStats(ts = {}) {\n  return Object.assign({\n    inMesh: false,\n    graftTime: 0,\n    meshTime: 0,\n    firstMessageDeliveries: 0,\n    meshMessageDeliveries: 0,\n    meshMessageDeliveriesActive: false,\n    meshFailurePenalty: 0,\n    invalidMessageDeliveries: 0\n  }, ts);\n}\n\nexports.createTopicStats = createTopicStats;\n\nfunction ensureTopicStats(topic, ps, params) {\n  let ts = ps.topics[topic];\n\n  if (ts) {\n    return ts;\n  }\n\n  if (!params.topics[topic]) {\n    return undefined;\n  }\n\n  ps.topics[topic] = ts = createTopicStats();\n  return ts;\n}\n\nexports.ensureTopicStats = ensureTopicStats;","map":{"version":3,"sources":["C:/Users/user/mew-supplychain/front-end/node_modules/libp2p-gossipsub/src/score/peer-stats.js"],"names":["Object","defineProperty","exports","value","ensureTopicStats","createTopicStats","createPeerStats","ps","assign","connected","expire","ips","behaviourPenalty","topics","entries","reduce","topic","topicStats","ts","inMesh","graftTime","meshTime","firstMessageDeliveries","meshMessageDeliveries","meshMessageDeliveriesActive","meshFailurePenalty","invalidMessageDeliveries","params","undefined"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,gBAAR,GAA2BF,OAAO,CAACG,gBAAR,GAA2BH,OAAO,CAACI,eAAR,GAA0B,KAAK,CAArF;;AACA,SAASA,eAAT,CAAyBC,EAAE,GAAG,EAA9B,EAAkC;AAC9B,SAAOP,MAAM,CAACQ,MAAP,CAAcR,MAAM,CAACQ,MAAP,CAAc;AAAEC,IAAAA,SAAS,EAAE,KAAb;AAAoBC,IAAAA,MAAM,EAAE,CAA5B;AAA+BC,IAAAA,GAAG,EAAE,EAApC;AAAwCC,IAAAA,gBAAgB,EAAE;AAA1D,GAAd,EAA6EL,EAA7E,CAAd,EAAgG;AAAEM,IAAAA,MAAM,EAAEN,EAAE,CAACM,MAAH,GACvGb,MAAM,CAACc,OAAP,CAAeP,EAAE,CAACM,MAAlB,EACGE,MADH,CACU,CAACF,MAAD,EAAS,CAACG,KAAD,EAAQC,UAAR,CAAT,KAAiC;AACzCJ,MAAAA,MAAM,CAACG,KAAD,CAAN,GAAgBX,gBAAgB,CAACY,UAAD,CAAhC;AACA,aAAOJ,MAAP;AACH,KAJC,EAIC,EAJD,CADuG,GAMvG;AAN6F,GAAhG,CAAP;AAOH;;AACDX,OAAO,CAACI,eAAR,GAA0BA,eAA1B;;AACA,SAASD,gBAAT,CAA0Ba,EAAE,GAAG,EAA/B,EAAmC;AAC/B,SAAOlB,MAAM,CAACQ,MAAP,CAAc;AAAEW,IAAAA,MAAM,EAAE,KAAV;AAAiBC,IAAAA,SAAS,EAAE,CAA5B;AAA+BC,IAAAA,QAAQ,EAAE,CAAzC;AAA4CC,IAAAA,sBAAsB,EAAE,CAApE;AAAuEC,IAAAA,qBAAqB,EAAE,CAA9F;AAAiGC,IAAAA,2BAA2B,EAAE,KAA9H;AAAqIC,IAAAA,kBAAkB,EAAE,CAAzJ;AAA4JC,IAAAA,wBAAwB,EAAE;AAAtL,GAAd,EAAyMR,EAAzM,CAAP;AACH;;AACDhB,OAAO,CAACG,gBAAR,GAA2BA,gBAA3B;;AACA,SAASD,gBAAT,CAA0BY,KAA1B,EAAiCT,EAAjC,EAAqCoB,MAArC,EAA6C;AACzC,MAAIT,EAAE,GAAGX,EAAE,CAACM,MAAH,CAAUG,KAAV,CAAT;;AACA,MAAIE,EAAJ,EAAQ;AACJ,WAAOA,EAAP;AACH;;AACD,MAAI,CAACS,MAAM,CAACd,MAAP,CAAcG,KAAd,CAAL,EAA2B;AACvB,WAAOY,SAAP;AACH;;AACDrB,EAAAA,EAAE,CAACM,MAAH,CAAUG,KAAV,IAAmBE,EAAE,GAAGb,gBAAgB,EAAxC;AACA,SAAOa,EAAP;AACH;;AACDhB,OAAO,CAACE,gBAAR,GAA2BA,gBAA3B","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ensureTopicStats = exports.createTopicStats = exports.createPeerStats = void 0;\nfunction createPeerStats(ps = {}) {\n    return Object.assign(Object.assign({ connected: false, expire: 0, ips: [], behaviourPenalty: 0 }, ps), { topics: ps.topics\n            ? Object.entries(ps.topics)\n                .reduce((topics, [topic, topicStats]) => {\n                topics[topic] = createTopicStats(topicStats);\n                return topics;\n            }, {})\n            : {} });\n}\nexports.createPeerStats = createPeerStats;\nfunction createTopicStats(ts = {}) {\n    return Object.assign({ inMesh: false, graftTime: 0, meshTime: 0, firstMessageDeliveries: 0, meshMessageDeliveries: 0, meshMessageDeliveriesActive: false, meshFailurePenalty: 0, invalidMessageDeliveries: 0 }, ts);\n}\nexports.createTopicStats = createTopicStats;\nfunction ensureTopicStats(topic, ps, params) {\n    let ts = ps.topics[topic];\n    if (ts) {\n        return ts;\n    }\n    if (!params.topics[topic]) {\n        return undefined;\n    }\n    ps.topics[topic] = ts = createTopicStats();\n    return ts;\n}\nexports.ensureTopicStats = ensureTopicStats;\n"]},"metadata":{},"sourceType":"script"}